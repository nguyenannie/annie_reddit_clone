<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Account #</title>
    <link href="/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../static/css/style.css" rel="stylesheet" th:href="@{/css/style.css}"/>
    <meta charset="utf-8" />
</head>
<body>
<div th:replace="home :: header"></div>
<header th:fragment="header">
    <nav class="navbar">
        <div class="container home">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a class="nav-link" th:href="@{'/mypost?username=' + ${user.name}}">My Posts</a>
                    </li>
                    <li>
                        <a class="nav-link" th:href="@{'/mycomment?username=' + ${user.name}}">My Comments</a>
                    </li>
                    <li>
                        <a class="nav-link" th:href="@{'/changepassword?username=' + ${user.name}}">Change Password</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <main role="main">
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Title</th>
                <th>Score</th>
                <th>Creation Time</th>
                <th>Delete</th>
                <th>Edit</th>
            </tr>
            </thead>
            <tbody th:each="mypost:${myposts}">
            <tr>
                <td th:text="${mypost.title}"></td>
                <td th:text="${mypost.score}"></td>
                <td th:text="${mypost.creationDate}"></td>
                <form action="#" th:action="@{'/deletePost?username=' + ${user.name} + '&amp;postid=' +  ${mypost.id}}" method="post">
                    <td><button class="btn btn-danger" type="submit" name="delete" th:value="${mypost.id}">Delete</button></td>
                </form>
                <td><button type="button" class="btn btn-warning" data-toggle="modal" th:attr="data-target='#myModal-'+${mypost.id}">Edit</button></td>
                <!--data-target="#myModal-${mypost.id}-->
                <div class="modal fade" th:attr="id='myModal-'+${mypost.id}">
                    <div class="modal-dialog" th:attr="id='myModal-'+${mypost.id}">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Edit Post</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form action="#" th:action="@{'/editPost?username=' + ${user.name} + '&amp;postid=' + ${mypost.id}}" th:object="${postForm}" method="post" id="editpost">
                                    <div class="form-group row">
                                        <label class="col-2 col-form-label"> Title </label>
                                        <div class="col-10">
                                            <input type="text" th:value="${mypost.title}" name="title" class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-2 col-form-label"> Content </label>
                                        <div class="col-10">
                                            <input type="text" th:value="${mypost.content}" name="content" class="form-control"/>
                                        </div>
                                    </div>
                                    <div class="container-button-bottom">
                                        <button type="submit" class="btn btn-success">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </tr>
            </tbody>
        </table>
    </div>
    </main>
</div>
<script src="/webjars/jquery/1.11.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js"></script>
</body>
</html>
